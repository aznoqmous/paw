!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e);var n={title:"PAW",icon:"icon-192.png",badge:"icon-192.png",cacheName:`SW-cache-${Date.now()}`,privateKey:"4AtF_NBS2jXcgQNEdQmOFLMeqA2ZWylX-_PhIlOq4xE",publicKey:"BE-bdUE6scWTi0HQzt3PujQcSDeCK0KKz-wCkq-XIfTIXhmawwI-dTUNZAZEH_X5rkDrBqbA71wba2CsAm7gyDA",strategy:"cache",debug:!0,staticPages:["/","/public/index.html","/public/offline.html"],offlinePage:null};class s{constructor(t,e,i){i=Object.assign({path:t,callback:e,offline:!1,online:!1,methods:"get,post"},i);for(let t in i)this[t]=i[t]}}let a=new class{constructor(t,e){this.config=Object.assign({title:n.title,cacheName:n.cacheName,offlinePage:n.offline,strategy:n.strategy},e),this.staticPages=n.staticPages;for(let t in this.config)this[t]=this.config[t];this.init(t),this.bind()}init(t){this.sw=t,this.routes=[],this.offlineRoutes=[]}bind(){this.sw.addEventListener("install",t=>{t.waitUntil(caches.open(this.cacheName).then(t=>t.addAll(this.staticPages)))}),this.sw.addEventListener("activate",t=>{t.waitUntil(this.clearOldCaches()),this.sw.skipWaiting(),this.sw.clients.claim()}),this.sw.addEventListener("fetch",t=>{let e=this.routeMatch(t.request);if(e.length){let i=this.controller(e[0]);i?t.respondWith(i):this.defaultFetchStrategy(t)}else"navigate"==t.request.mode&&this.defaultFetchStrategy(t)}),this.sw.addEventListener("push",t=>{t.waitUntil(this.notify(JSON.stringify(t.data),"New push notification"))})}store(t,e){let i=e.clone();caches.open(this.cacheName).then(e=>{e.put(t,i)})}clearOldCaches(){return caches.keys().then(t=>Promise.all(t.map(t=>{if(t!==this.cacheName)return caches.delete(t)})))}clearCache(){return caches.delete(this.cacheName)}defaultFetchStrategy(t){return"cache"==this.strategy?this.strategyCache(t):"network"==this.strategy?this.strategyNetwork(t):void 0}strategyNetwork(t){t.respondWith(fetch(t.request).then(e=>(200==e.status&&this.store(t.request.url,e),e)).catch(()=>caches.open(this.cacheName).then(e=>e.match(t.request)?e.match(t.request):e.match(this.offlinePage))))}strategyCache(t){t.respondWith(caches.open(this.cacheName).then(e=>(e.match(t.request)&&fetch(t.request).then(e=>(200==e.status&&this.store(t.request.url,e),e)),e.match(t.request))))}route(t,e,i){this.routes.push(new s(t,e,i))}offline(t,e){this.routes.push(new s(t,e,{offline:!0}))}online(t,e){this.routes.push(new s(t,e,{online:!0}))}routeMatch(t){let e=new URL(t.url).pathname;return this.routes.filter(i=>!(!i.methods.toLowerCase().match(t.method.toLowerCase())||e!=i.path||i.offline&&navigator.onLine||i.online&&!navigator.onLine))}controller(t){let e=t.callback();return!!e&&new Response(e,{status:200})}notify(t,e=!1){e=`${this.title} ${e?"-"+e:""}`;let i={body:`${t}`,icon:n.icon,badge:n.badge};return this.sw.registration.showNotification(e,i)}}(self);a.route("/",()=>"index"),a.online("/test",()=>JSON.stringify("offline")),a.offline("/test",()=>(a.notifiy("You are offline"),JSON.stringify("online"))),a.notify("Installation complete !")}]);